title: Stock Inventory
type: jig.list
description: =@ctx.solution.state.selectedProduct

header:
  type: component.jig-header
  options:
    height: medium
    children:
      type: component.image
      options:
        source:
          uri: https://images.unsplash.com/photo-1553413077-190dd305871c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1035&q=80
        title: Product inventory
        subtitle: Updated 3 mins ago

data: =@ctx.datasources.inventory
item:
  type: component.list-item
  options:
    label:
      title: =@ctx.current.item.current & ' / ' & @ctx.current.item.total
      color:
        - when: =((@ctx.current.item.current / @ctx.current.item.total) < 0.25)
          color: color4
        - when: =((@ctx.current.item.current / @ctx.current.item.total) > 0.25)
          color: color2
    color:
      - when: =((@ctx.current.item.current / @ctx.current.item.total) < 0.25)
        color: color4
      - when: =((@ctx.current.item.current / @ctx.current.item.total) < 0.50)
        color: color3
    title: =@ctx.current.item.name
    description: =@ctx.current.item.description
    subtitle: =((@ctx.current.item.current / @ctx.current.item.total) < 0.25) ? "Low inventory" :""
    style:
      isError: =((@ctx.current.item.current / @ctx.current.item.total) < 0.25) ? true :false
    progress: =(@ctx.current.item.current / @ctx.current.item.total)
    leftElement:
      element: avatar
      text: =@ctx.current.item.avatar-text
    swipeable:
      left:
        - label: label
          icon: pencil-2
          color: warning
          onPress:
            type: action.set-state
            options:
              state: =@ctx.solution.state.selectedProduct
              value: =@ctx.current.item.name
      right:
        - label: label
          icon: pencil-2
          color: primary
          onPress:
            type: action.set-state
            options:
              state: =@ctx.solution.state.selectedProduct
              value: =@ctx.current.item.name

actions:
  - children:
      - type: action.open-url
        options:
          title: Buy products with low inventory
          url: https://docs.jigx.com/examples/action-list

summary:
  children:
    type: component.summary
    options:
      layout: default
      title: =$count(@ctx.datasources.inventory) & " Products"
      subtitle: In total
      leftIcon:
        element: icon
        icon: shopping-cart-empty-1
        isContained: true
        isDuotone: true
