title: Opportunities
type: jig.list

filter:
  - title: All
    value: ALL
  - title: Won
    value: Success
  - title: Lost
    value: Unsuccessful

data: =$filter(@ctx.datasources.components, function($v, $i, $a) {  @ctx.jig.state.filter = 'ALL' or $v.result = @ctx.jig.state.filter})
item:
  type: component.list-item
  options:
    title: =@ctx.current.item.name
    subtitle: =@ctx.current.item.reason
    color:
      - when: =(@ctx.current.item.result= 'Success' ? true :false)
        color: color2
    progress: =@ctx.current.item.progress
    leftElement:
      element: checkbox
      value: =(@ctx.current.item.status= 'Finished' ? true :false)
    style:
      isError: =(@ctx.current.item.result= 'Unsuccessful' ? true :false)
      isStrikeThrough: =(@ctx.current.item.status= 'Finished' ? true :false)
    rightElement:
      element: value
      text: ="$ " & @ctx.current.item.value

summary:
  children:
    type: component.summary
    options:
      layout: counter
      value: =$count(@ctx.datasources.components)
      title: Opportunities
      subtitle: ="Worth $ " & $sum(@ctx.datasources.components.value)
